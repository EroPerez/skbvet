<?php

class M_tblbreeds extends CI_Model {

////////////////////////////////////////////////////////////////////////////////////////////////////////// 
//Tabla tblBreeds Atributos 
//////////////////////////////////////////////////////////////////////////////////////////////////////////

    var $recn = '';
    var $name = '';
    var $speciesrecn = ''; //llave externa

//////////////////////////////////////////////////////////////////////////////////////////////////////////    
// M�todos de la clase Breeds.
//////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////
//Construtor de la clase.

    public function __construct() {
        parent::__construct();
        $this->load->database();
    }

/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////   
/// Esta funci�n inserta un elemento en la tabla.

    public function set_breeds($data) {
        $this->name = $data['d_name'];
        $this->speciesrecn = $data['d_speciesrecn'];
        $query = $this->db->insert('tblbreeds', $this);
        return $query;
    }

////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////// 
// Esta funci�n actualiza un elemento en la tabla.

    function update_breeds($data) {
        $this->recn = $data['d_recn'];
        $this->name = $data['d_name'];
        $this->speciesrecn = $data['d_speciesrecn'];
        $this->db->where('recn', $data['d_recn']);
        $query = $this->db->update('tblbreeds', $this);
        return $query;
    }

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////   
// Esta funci�n elimina un elemento en la tabla.

    public function del_breeds($recn) {
        $query = $this->db->delete('tblbreeds', array('recn' => $recn));
        return $query;
    }

/////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////   
// Esta funci�n busca elementos en la tabla que cumplen con un criterio.

    public function find_breeds($data) {
        $this->db->select('tblbreeds.*');
        $this->db->from('tblbreeds');
        $this->db->like('name', $data['d_name']);
        $query = $this->db->get();
        return $query->result_array();
    }

/////////////////////////////////////////////////////////////////////////////////////
/// Retorna todos los datos de la tabla.

    public function get_all_breeds() {
        $query = $this->db->get('tblbreeds');
        return $query->result_array();
    }

///////////////////////////////////////////////////////////////////////////////////// 
    /////////////////////////////////////////////////////////////////////////////////////
/// Retorna todos los datos de un art�culo solicitado.

    public function get_one_breeds($recn) {
        $query = $this->db->get_where('tblbreeds', array('recn' => $recn));
        return $query->result_array();
    }

/////////////////////////////////////////////////////////////////////////////////////


    public function get_breeds_by_species($recn) {
        $this->db->select('tblbreeds.*, tblspecies.name AS sname');
        $this->db->from('tblbreeds');
        $this->db->join('tblspecies', 'tblspecies.recn = tblbreeds.speciesrecn');
        $this->db->where('speciesrecn', $recn);
        $query = $this->db->get();
        return $query->result_array();
    }

}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

